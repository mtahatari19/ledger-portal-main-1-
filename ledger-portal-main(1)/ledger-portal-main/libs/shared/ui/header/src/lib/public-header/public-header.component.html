<mat-toolbar class="border-foreground/10 border-b border-solid">
  <div class="container">
    <div class="flex items-center justify-between">
      @if (isSmallScreen$ | async) {
        <div class="grid grid-cols-12 px-2">
          <button
            class="flex flex-col justify-center"
            [matMenuTriggerFor]="settingMenu"
            aria-label="تنظیمات"
            i18n="عنوان ایکن تنظیمات در صفحه لاگین">
            <mat-icon svgIcon="avatar" class="!h-[36px] !w-[36px]" />
          </button>
          <div
            class="mat-subheading-2 col-span-10 !mb-0 flex items-center justify-center text-center !font-medium"
            i18n="عنوان ledger-portal در هدر صفحه لاگین و لندینگ">
            ledger-portal
          </div>
          <button mat-icon-button [matMenuTriggerFor]="menu" aria-label="نمایش بیشتر" i18n-aria-label="@@showMore">
            <mat-icon svgIcon="more-vert" ledgerPortalSvgIconType="stroke" />
          </button>
        </div>
        <mat-menu #menu="matMenu" yPosition="below" backdropClass="bg-foreground/30">
          @for (link of links; track link) {
            @if (link.isExternal) {
              <a mat-menu-item [href]="link.command" target="_blank">
                {{ link.title }}
              </a>
            }
            @if (!link.isExternal) {
              <a mat-menu-item [routerLink]="link.command" routerLinkActive="active">
                {{ link.title }}
              </a>
            }
          }
        </mat-menu>
      } @else {
        <div class="flex">
          <ledger-portal-logo [height]="42" type="fill" />
          <nav class="flex items-center px-2">
            @for (link of links; track link.browserUrl + link.title) {
              @if (link.isExternal) {
                <a mat-button [href]="link.command" target="_blank">
                  {{ link.title }}
                </a>
              }
              @if (!link.isExternal) {
                <a mat-button [routerLink]="link.command" routerLinkActive="active">
                  {{ link.title }}
                </a>
              }
            }
          </nav>
        </div>
        <div class="flex items-center">
          <button
            class="mx-4 flex flex-col justify-center"
            [matMenuTriggerFor]="settingMenu"
            aria-label="تنظیمات"
            i18n="عنوان ایکن تنظیمات در صفحه لاگین">
            <mat-icon svgIcon="avatar" class="!h-[36px] !w-[36px]" />
          </button>
          <ledger-portal-logo [width]="80" [height]="40" />
        </div>
      }
    </div>
  </div>
</mat-toolbar>
<!-- Desktop template -->
<!-- Mobile template -->
<mat-menu
  #settingMenu="matMenu"
  yPosition="below"
  xPosition="before"
  backdropClass="bg-foreground/30"
  class="public-header-mobile-menu !mt-1 !min-w-[250px] lg:!mt-3">
  <div class="text-foreground px-4 py-2">
    <span i18n="عنوان مربوط به پروفایل من در صفحات قبل از لاگین در بخش تنظیمات"> پروفایل من</span>
    <small
      class="!my-2 block opacity-75"
      i18n="عنوان مربوط به شما هنوز وارد نشده اید در ضفحات قبل از لاگین در بخش تنظیمات"
      >شما هنوز وارد نشده اید.</small
    >
  </div>
  <!--  <mat-divider></mat-divider>-->
  <!--  @if (language$ | async; as currentLanguage) {-->
  <!--    <mat-expansion-panel class="mat-elevation-z0">-->
  <!--      <mat-expansion-panel-header-->
  <!--        class="!px-4"-->
  <!--        expandedHeight="48px"-->
  <!--        collapsedHeight="48px"-->
  <!--        (click)="$event.stopPropagation()">-->
  <!--        <mat-panel-title>-->
  <!--          <div class="flex items-center">-->
  <!--            <mat-icon svgIcon="global" />-->
  <!--            <span class="mx-1" i18n="@@language">زبان</span>-->
  <!--            <small class="mx-1 opacity-75">({{ currentLanguage.name }})</small>-->
  <!--          </div>-->
  <!--        </mat-panel-title>-->
  <!--      </mat-expansion-panel-header>-->
  <!--      <mat-selection-list-->
  <!--        color="primary"-->
  <!--        #localeSelectionList-->
  <!--        [multiple]="false"-->
  <!--        (selectionChange)="changeLanguage(localeSelectionList.selectedOptions.selected![0].value)">-->
  <!--        @for (language of languages; track language) {-->
  <!--          <mat-list-option [value]="language.code" [selected]="language.code === currentLanguage.code">-->
  <!--            {{ language.name }}-->
  <!--          </mat-list-option>-->
  <!--        }-->
  <!--      </mat-selection-list>-->
  <!--    </mat-expansion-panel>-->
  <!--  }-->
  <mat-divider></mat-divider>
  @if (colorPalette$ | async; as currentColorPalette) {
    <mat-expansion-panel class="mat-elevation-z0">
      <mat-expansion-panel-header
        class="!px-4"
        expandedHeight="48px"
        collapsedHeight="48px"
        (click)="$event.stopPropagation()">
        <mat-panel-title>
          <div class="flex items-center">
            <mat-icon svgIcon="brush-2" />
            <span class="mx-1" i18n="@@theme">قالب</span>
            <small class="mx-1 opacity-75"> ({{ currentColorPalette.title }}) </small>
          </div>
        </mat-panel-title>
      </mat-expansion-panel-header>
      <mat-selection-list
        color="primary"
        #colorPaletteSelectionList
        [multiple]="false"
        (selectionChange)="changeColorPalette(colorPaletteSelectionList.selectedOptions.selected![0].value)">
        @for (palette of colorPalettes; track palette) {
          <mat-list-option
            (click)="changeColorPalette(palette.name)"
            [selected]="palette.name === currentColorPalette.name">
            <span matListItemTitle>{{ palette.title }}</span>
            <span
              matListItemAvatar
              class="!h-5 !w-5"
              [style.background]="calculatePaletteCircleStyle(palette.primary, palette.accent)">
            </span>
          </mat-list-option>
        }
      </mat-selection-list>
    </mat-expansion-panel>
  }
  <div class="mt-4 flex justify-between px-4 pb-2">
    <div class="flex items-center">
      <mat-icon svgIcon="mask" />
      <span class="text-foreground mx-1"> {{ themeTitles['dark'] }}</span>
    </div>
    <ledger-portal-toggle-color-scheme
      [hideIcons]="true"
      [checked]="(colorScheme$ | async) === 'dark'"
      (click)="$event.stopPropagation()"
      (toggleChange)="toggleDarkMode($event.checked)">
    </ledger-portal-toggle-color-scheme>
  </div>
</mat-menu>
